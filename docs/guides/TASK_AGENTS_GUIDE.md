# 작업 분해 에이전트 가이드

작업 분해와 관련된 3개 에이전트의 역할을 명확히 정의합니다.

---

## 에이전트 역할 매트릭스

| 에이전트 | 핵심 질문 | 역할 | MCP 도구 |
|----------|-----------|------|----------|
| **task-decomposition-expert** | **What** (무엇을) | 목표 → 서브태스크 분해 | ChromaDB |
| **taskmanager-planner** | **When/Order** (언제/순서) | 태스크 → 일정/의존성 | taskmanager |
| **seq-engineer** | **How** (어떻게) | 순차적 실행 단계 설계 | sequentialthinking |

---

## 상세 역할 정의

### 1. task-decomposition-expert (분해 전문가)

**담당**: 복잡한 목표를 서브태스크로 분해

**사용 시점**:
- "이 기능을 어떻게 나눠서 개발할까?"
- "프로젝트를 작은 단위로 쪼개줘"
- 복잡한 목표의 구조화 필요 시

**핵심 기능**:
- 목표 분석 및 분해
- ChromaDB를 활용한 정보 저장/검색
- 리소스 식별 (에이전트, 도구, API)
- 워크플로우 아키텍처 설계

**출력물**: 태스크 계층 구조 + 리소스 매핑

```
예시:
목표: "사용자 인증 시스템 구현"
↓
├── 1. 데이터베이스 설계
│   ├── 1.1 사용자 테이블 스키마
│   └── 1.2 세션 테이블 스키마
├── 2. API 개발
│   ├── 2.1 로그인 엔드포인트
│   └── 2.2 회원가입 엔드포인트
└── 3. 프론트엔드 통합
```

---

### 2. taskmanager-planner (일정 계획가)

**담당**: 태스크에 일정과 의존성 부여

**사용 시점**:
- "이 태스크들의 순서를 정해줘"
- "스프린트 계획을 세워줘"
- 의존성 매핑과 타임라인 필요 시

**핵심 기능**:
- Work Breakdown Structure (WBS)
- 의존성 매핑
- Critical Path 식별
- 리소스 할당 계획

**출력물**: 일정표 + 의존성 그래프 + 마일스톤

```
예시:
태스크: "사용자 인증 시스템"
↓
| ID | 태스크 | 의존성 | 기간 | 담당 |
|----|--------|--------|------|------|
| T1 | DB 설계 | - | 2일 | DBA |
| T2 | 로그인 API | T1 | 3일 | Backend |
| T3 | 회원가입 API | T1 | 2일 | Backend |
| T4 | 프론트엔드 | T2, T3 | 3일 | Frontend |
```

---

### 3. seq-engineer (순차 실행 전문가)

**담당**: 단계별 실행 절차 설계

**사용 시점**:
- "이걸 어떤 순서로 진행할까?"
- "복잡한 디버깅 절차가 필요해"
- 순차적 분석/실행이 필요한 경우

**핵심 기능**:
- 순차적 사고 (Sequential Thinking)
- 단계별 검증 체크포인트
- 진행 상황 추적
- 논리적 일관성 검증

**출력물**: 순차 실행 플로우 + 검증 포인트

```
예시:
문제: "캐시와 DB 간 데이터 불일치"
↓
Step 1: 캐시 상태 확인 → [검증: 캐시 키 존재?]
Step 2: DB 쿼리 실행 → [검증: 데이터 일치?]
Step 3: TTL 확인 → [검증: 만료 시점?]
Step 4: 동기화 로직 분석 → [검증: 레이스 컨디션?]
Step 5: 수정 및 테스트 → [검증: 불일치 해소?]
```

---

## 에이전트 선택 가이드

```
사용자 요청
    ↓
┌─────────────────────────────────────────────────────────┐
│ "무엇을 해야 하는지" 불명확?                              │
│ → task-decomposition-expert (목표 분해)                 │
└─────────────────────────────────────────────────────────┘
    ↓ 태스크 목록 확보
┌─────────────────────────────────────────────────────────┐
│ "언제/어떤 순서로" 해야 하는지 필요?                       │
│ → taskmanager-planner (일정 계획)                       │
└─────────────────────────────────────────────────────────┘
    ↓ 일정 및 의존성 확보
┌─────────────────────────────────────────────────────────┐
│ "어떻게 실행할지" 상세 절차 필요?                          │
│ → seq-engineer (순차 실행)                              │
└─────────────────────────────────────────────────────────┘
```

---

## 조합 사용 예시

### 시나리오: 대규모 마이그레이션

```
1. task-decomposition-expert
   "MySQL → PostgreSQL 마이그레이션을 분해해줘"
   → 서브태스크 목록 생성

2. taskmanager-planner
   "이 태스크들의 일정과 의존성을 정해줘"
   → 스프린트 계획 + 의존성 그래프

3. seq-engineer
   "각 단계의 상세 실행 절차를 설계해줘"
   → 단계별 체크리스트 + 검증 포인트
```

---

## 잘못 사용하지 않아야 할 경우

| 에이전트 | 잘못된 사용 | 올바른 대안 |
|----------|-------------|-------------|
| task-decomposition-expert | 단순 태스크 분해 | 직접 처리 |
| taskmanager-planner | 실행 절차 설계 | seq-engineer |
| seq-engineer | 목표 분해 | task-decomposition-expert |
