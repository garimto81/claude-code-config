# [PRD] VTC Story Ledger v3.0 - Ultimate Edition
**í”„ë¡œì íŠ¸ëª…**: VTC Story Ledger (í˜„ì¥ ìŠ¤í† ë¦¬-ìŠ¤í…Œì´íŠ¸ ë¡œê±°)
**ë¬¸ì„œ ë²„ì „**: 3.0 (2025-01-06)
**í•µì‹¬ ì•„í‚¤í…ì²˜**: **Supabase** (PostgreSQL, Auth, Realtime) + **Offline-First PWA**
**íƒ€ê²Ÿ ë””ë°”ì´ìŠ¤**: ìŠ¤ë§ˆíŠ¸í° (iOS/Android)

---

## ğŸ“Š Executive Summary

### í•µì‹¬ ë¬¸ì œ
VTCíŒ€ì€ í˜„ì¬ **ìˆ˜ë°± ê°œì˜ ì˜ìƒ í´ë¦½ê³¼ ë¡œê·¸ ë°ì´í„°ë¥¼ ìˆ˜ë™ ë§¤ì¹­**í•˜ëŠ” ë° ê³¼ë„í•œ ì‹œê°„ì„ ì†Œëª¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- **í˜„ì¬ ì†Œìš” ì‹œê°„**: í•¸ë“œë‹¹ í‰ê·  12ë¶„ (ì˜ìƒ ì°¾ê¸° + ë°ì´í„° ëŒ€ì¡° + í¸ì§‘)
- **ëª©í‘œ ì‹œê°„**: í•¸ë“œë‹¹ **3ë¶„ ì´í•˜** (ìë™ ë§¤ì¹­ + í¸ì§‘ë§Œ)

### ì†”ë£¨ì…˜
**íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ìë™ ë§¤ì¹­** + **ë‹¤ì¤‘ ì‚¬ìš©ì ì‹¤ì‹œê°„ ë™ê¸°í™”** + **ì˜¤í”„ë¼ì¸ ìš°ì„  ì•„í‚¤í…ì²˜**ë¥¼ í†µí•´:
1. ì˜ìƒ(`C0001.MP4`, ìƒì„±ì‹œê°„: `14:32:15`) â†” ë¡œê·¸(`created_at: 14:32:15`) **ìë™ 1:1 ë§¤ì¹­**
2. 10ëª… ì´ìƒì˜ ë¡œê±°ê°€ **ì¶©ëŒ ì—†ì´ ë™ì‹œ ì‘ì—…**
3. ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • í™˜ê²½ì—ì„œë„ **ë°ì´í„° ì†ì‹¤ ì œë¡œ**

---

## 1. ë¬¸ì œ ì •ì˜ & ëª©í‘œ (Problem & Objectives)

### 1.1. VTCíŒ€ ì›Œí¬í”Œë¡œìš°
VTC(Virtual Table Contents)íŒ€ì˜ ì½˜í…ì¸  ì œì‘ì€ **A (ì˜ìƒ) + B (ë°ì´í„°)** ë‘ ì†ŒìŠ¤ì˜ ê²°í•©ì…ë‹ˆë‹¤:

**A. ì˜ìƒ ì†ŒìŠ¤** (í—Œí„°ê°€ ì´¬ì˜)
- `C0001.MP4` (íŒŒì¼ ìƒì„±ì‹œê°„: `14:30:05`)
- `C0002.MP4` (íŒŒì¼ ìƒì„±ì‹œê°„: `14:32:15`)

**B. ë°ì´í„° ì†ŒìŠ¤** (ë¡œê±°ê°€ ê¸°ë¡)
- "14:32ê²½, Daniel K.(KP)ê°€ AAë¡œ Preflop ì˜¬ì¸ ìŠ¹ë¦¬"

**í˜„ì¬ Pain Point**: VTCíŒ€ì€ íŒŒì¼ì„ **ì¼ì¼ì´ ì—´ì–´ë³´ê¸° ì „ê¹Œì§€** ì–´ë–¤ ì˜ìƒì´ ì–´ë–¤ ìŠ¤í† ë¦¬ì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ â†’ **"ë¶„ë¥˜ ì§€ì˜¥"**

### 1.2. í•µì‹¬ ëª©í‘œ (Key Objectives)

| ëª©í‘œ | ì„±ê³µ ì§€í‘œ |
|------|-----------|
| **ì‹œê°„ ì ˆì•½** | í•¸ë“œë‹¹ ì‘ì—…ì‹œê°„ **12ë¶„ â†’ 3ë¶„** (75% ê°ì†Œ) |
| **íƒ€ì„ìŠ¤íƒ¬í”„ ì •í™•ë„** | ì˜ìƒ-ë°ì´í„° ë§¤ì¹­ ì˜¤ì°¨ **Â±60ì´ˆ ì´ë‚´** |
| **ë™ì‹œ ì‚¬ìš©ì ì§€ì›** | **50ëª…** ë™ì‹œ ì ‘ì† ì‹œ ì¶©ëŒ ì—†ìŒ |
| **ì˜¤í”„ë¼ì¸ ë‚´êµ¬ì„±** | ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ì‹œ **ë¡œì»¬ ì €ì¥ â†’ ìë™ ë™ê¸°í™”** |
| **ë°ì´í„° ë¬´ê²°ì„±** | ëª¨ë“  í•¸ë“œ ë¡œê·¸ì— **ìœ„ë³€ì¡° ë°©ì§€ ì¦ëª…** (ì„ íƒ) |

---

## 2. ì‚¬ìš©ì & ì—­í•  (Users & Roles)

### 2.1. Primary Users

#### ë¡œê±° (Logger) - í˜„ì¥ ë°ì´í„° ê¸°ë¡ì
- **ê¸°ìˆ  ìˆ˜ì¤€**: ëª¨ë°”ì¼ ì•± ì´ˆì‹¬ì í¬í•¨
- **ì‚¬ìš© í™˜ê²½**:
  - ì–´ë‘ìš´ í† ë„ˆë¨¼íŠ¸ í˜„ì¥ (ë‹¤í¬ëª¨ë“œ í•„ìˆ˜)
  - ë¶ˆì•ˆì •í•œ Wi-Fi (ì˜¤í”„ë¼ì¸ ëª¨ë“œ í•„ìˆ˜)
  - 8ì‹œê°„ ì—°ì† ì‚¬ìš© (ë°°í„°ë¦¬ ìµœì í™” í•„ìˆ˜)
- **í•µì‹¬ ë‹ˆì¦ˆ**: "ë¹ ë¥´ê³  ê°„ë‹¨í•˜ê²Œ ì…ë ¥"

#### VTC í”„ë¡œë“€ì„œ (Admin) - ê´€ë¦¬ì
- **ê¶Œí•œ**:
  - ì „ì²´ í…Œì´ë¸” ìƒíƒœ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
  - ì˜ëª»ëœ ë¡œê·¸ ì‚­ì œ
  - ë¡œê±°ì˜ í…Œì´ë¸” ê°•ì œ Unclaim
  - ë¡œê±° ê³„ì • ê´€ë¦¬

### 2.2. Secondary Users

#### VTC í¸ì§‘íŒ€ (Consumer) - ë°ì´í„° ì†Œë¹„ì
- Supabase Realtimeì„ í†µí•´ í•¸ë“œ ë¡œê·¸ë¥¼ **ì‹¤ì‹œê°„ ìˆ˜ì‹ **
- `created_at` íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì˜ìƒ ìë™ ë§¤ì¹­

---

## 3. í•µì‹¬ ê¸°ëŠ¥ (Core Features)

### 3.1. ì‹¤ì‹œê°„ í…Œì´ë¸” ìƒíƒœ ë™ê¸°í™” (Real-time Table Claiming)

**ë¬¸ì œ**: 10ëª…ì˜ ë¡œê±°ê°€ ë™ì‹œì— ê°™ì€ í…Œì´ë¸”ì„ ë¡œê¹…í•˜ë ¤ëŠ” ì¶©ëŒ

**ì†”ë£¨ì…˜**: Supabase Realtime + PostgreSQL Row-Level Lock

#### ì›Œí¬í”Œë¡œìš°
```
[ë¡œê±° A] Tbl 4 íƒ­
  â†“
[DB] UPDATE tables SET current_logger_id = 'A' WHERE table_id = 4 AND current_logger_id IS NULL
  â†“ (ì„±ê³µ ì‹œ)
[Realtime] ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸
  â†“
[ë¡œê±° Bì˜ UI] Tbl 4 â†’ [Logged by: A] (ì ê¹€, íšŒìƒ‰)
```

#### ë™ì‹œ Claim ì¶©ëŒ í•´ê²° (0.1ì´ˆ ì°¨ì´)
```sql
-- PostgreSQLì˜ Optimistic Locking í™œìš©
UPDATE tables
SET current_logger_id = $1,
    version = version + 1  -- ë²„ì „ ì¹´ìš´í„° ì¦ê°€
WHERE table_id = $2
  AND (current_logger_id IS NULL OR current_logger_id = $1)
  AND version = $3  -- ì´ì „ ë²„ì „ê³¼ ì¼ì¹˜í•´ì•¼ ì„±ê³µ
RETURNING *;
```

**ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ì•Œë¦¼**:
```
âš ï¸ ì´ í…Œì´ë¸”ì€ ë°©ê¸ˆ ë‹¤ë¥¸ ë¡œê±°ê°€ ì„ íƒí–ˆìŠµë‹ˆë‹¤.
   ë‹¤ë¥¸ í…Œì´ë¸”ì„ ì„ íƒí•˜ê±°ë‚˜ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.
```

---

### 3.2. ì˜¤í”„ë¼ì¸ í¼ìŠ¤íŠ¸ ì•„í‚¤í…ì²˜ (Offline-First Architecture)

**ë¬¸ì œ**: í† ë„ˆë¨¼íŠ¸ í˜„ì¥ì˜ ë¶ˆì•ˆì •í•œ ë„¤íŠ¸ì›Œí¬ â†’ ë°ì´í„° ì†ì‹¤ ìœ„í—˜

**ì†”ë£¨ì…˜**: PWA + IndexedDB + ìë™ ë™ê¸°í™” í

#### ë°ì´í„° íë¦„
```
[ë¡œê±° ì…ë ¥] â†’ [IndexedDB ì¦‰ì‹œ ì €ì¥]
  â†“ (ì˜¤í”„ë¼ì¸)
[UIì— "ë™ê¸°í™” ëŒ€ê¸° ì¤‘" ë°°ì§€ í‘œì‹œ]
  â†“ (ì˜¨ë¼ì¸ ë³µê·€ ê°ì§€)
[ìë™ìœ¼ë¡œ Supabaseì— ì „ì†¡] â†’ [ì„±ê³µ ì‹œ IndexedDB í•­ëª© ì‚­ì œ]
```

#### ê¸°ìˆ  ìŠ¤íƒ
- **Service Worker**: ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€
- **IndexedDB**: ë¡œì»¬ í ì €ì¥ (Dexie.js ë¼ì´ë¸ŒëŸ¬ë¦¬)
- **Background Sync API**: ë¸Œë¼ìš°ì €ê°€ ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ìë™ ì‹¤í–‰

---

### 3.3. ìŠ¤ë§ˆíŠ¸ ì¹© ê³„ì‚° (Auto Stack Calculation)

**ë¬¸ì œ**: ë¡œê±°ê°€ ë§¤ í•¸ë“œë§ˆë‹¤ `Stack (Before)` ìˆ˜ë™ ì…ë ¥ â†’ ì‹œê°„ ì†Œëª¨ + ì˜¤ë¥˜ ê°€ëŠ¥

**ì†”ë£¨ì…˜**: ì´ì „ í•¸ë“œì˜ `Stack (After)` â†’ ìë™ìœ¼ë¡œ í˜„ì¬ í•¸ë“œì˜ `Stack (Before)`ë¡œ í”„ë¦¬í•„

#### ë¡œì§
```javascript
// í˜„ì¬ í•¸ë“œ í¼ ë¡œë“œ ì‹œ
const lastHand = await getLastHandForPlayer(kp_id, table_id);
if (lastHand) {
  form.stackBefore.value = lastHand.stack_after; // ìë™ ì…ë ¥
}
```

#### UI
```
ğŸ‘¤ Daniel K.
   Stack (Before): 1,250,000  â† [ìë™ ì…ë ¥ë¨] (ìˆ˜ì • ê°€ëŠ¥)
   Stack (After):  [ ì…ë ¥ í•„ìš” ]
```

---

### 3.4. ë¹ ë¥¸ ì…ë ¥ ëª¨ë“œ (Quick Log Mode)

**ë¬¸ì œ**: ì¹´ë“œ ë””í…Œì¼ì´ ë¶ˆí•„ìš”í•œ í•¸ë“œ (ì˜ˆ: ë¹ ë¥¸ í´ë“œ ìŠ¹ë¦¬) â†’ ì „ì²´ í¼ ì…ë ¥ì€ ê³¼ë„í•¨

**ì†”ë£¨ì…˜**: 3íƒ­ ì™„ë£Œ ê°„ì†Œí™” ëª¨ë“œ

#### ì›Œí¬í”Œë¡œìš°
```
1. [KP ì„ íƒ] (ëŒ€ì‹œë³´ë“œì—ì„œ)
   â†“
2. [Quick Log] ë²„íŠ¼ íƒ­
   â†“
3. ê°„ì†Œí™” í¼:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Opponent: [Seat 5 â–¼]        â”‚
   â”‚ Result:   [âœ“ KP ìŠ¹ë¦¬]       â”‚
   â”‚ Pot Size: [125,000]         â”‚
   â”‚                             â”‚
   â”‚    [ğŸ’¾ Save & Send]         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
4. ì™„ë£Œ! (3ì´ˆ ì†Œìš”)
```

#### ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
```json
{
  "quick_log": true,
  "logging_street": "Unknown",
  "board_cards": null,
  "showdown_cards": null,
  "final_pot_size": 125000,
  "result": "KP Win"
}
```

---

### 3.5. Admin ëŒ€ì‹œë³´ë“œ (VTC Producer Console)

**ê¶Œí•œ**: `profiles.role = 'admin'`ì¸ ì‚¬ìš©ìë§Œ ì ‘ê·¼

#### ê¸°ëŠ¥

**A. ì‹¤ì‹œê°„ ë¡œê±° í™œë™ ëª¨ë‹ˆí„°**
```
â”Œâ”€ ì‹¤ì‹œê°„ í˜„í™© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— Logger A  â†’ Tbl 4  (2ë¶„ ì „)     â”‚
â”‚ â— Logger B  â†’ Tbl 7  (ë°©ê¸ˆ ì „)    â”‚
â”‚ â—‹ Logger C  â†’ (ëŒ€ê¸° ì¤‘)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**B. ê°•ì œ Unclaim**
```
âš ï¸ Tbl 4ê°€ 15ë¶„ ë™ì•ˆ ì—…ë°ì´íŠ¸ ì—†ìŒ
   [ğŸ”“ ê°•ì œ í•´ì œ] ë²„íŠ¼
```

**C. ë¡œê·¸ ì‚­ì œ (ì‹¤ìˆ˜ ìˆ˜ì •)**
```sql
-- Adminë§Œ ì‹¤í–‰ ê°€ëŠ¥ (RLS ì •ì±…)
DELETE FROM hands WHERE hand_id = $1;
DELETE FROM hand_players_ledger WHERE hand_id = $1;
```

**D. ì˜ìƒ íŒŒì¼ ì—…ë¡œë“œ ì§€ì›**
```
[ğŸ“¹ ì˜ìƒ ë°›ê¸°] â†’ Google Drive ìë™ ì—…ë¡œë“œ
  â†“
[íƒ€ì„ìŠ¤íƒ¬í”„ ìë™ ì¶”ì¶œ] (íŒŒì¼ ìƒì„±ì‹œê°„)
  â†“
[ë§¤ì¹­ í›„ë³´ ë¡œê·¸ í‘œì‹œ] (Â±60ì´ˆ ë²”ìœ„)
```

---

## 4. ì‚¬ìš©ì ìŠ¤í† ë¦¬ (User Stories)

### 4.1. ê³¨ë“  íŒ¨ìŠ¤ (Golden Path)

#### Story 1: ë¡œê±°ì˜ ì •ìƒ ë¡œê¹…
```
As a ë¡œê±°,
I want to KPë¥¼ ì„ íƒí•˜ê³  í•¸ë“œ ê²°ê³¼ë¥¼ ë¹ ë¥´ê²Œ ì…ë ¥í•˜ì—¬
So that VTCíŒ€ì´ ì˜ìƒê³¼ ìë™ ë§¤ì¹­í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.

Acceptance Criteria:
âœ“ KP ì„ íƒ í›„ 2ì´ˆ ì´ë‚´ì— í…Œì´ë¸” Claim ì™„ë£Œ
âœ“ Quick Log ëª¨ë“œë¡œ 5ì´ˆ ì´ë‚´ ì…ë ¥ ê°€ëŠ¥
âœ“ ì „ì†¡ ì„±ê³µ ì‹œ í–…í‹± í”¼ë“œë°± (ì§„ë™ 1íšŒ)
```

#### Story 2: VTC í”„ë¡œë“€ì„œì˜ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
```
As a VTC í”„ë¡œë“€ì„œ,
I want to ëª¨ë“  ë¡œê±°ì˜ í™œë™ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ì œí•˜ì—¬
So that ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ì‹œ ê°œì…í•  ìˆ˜ ìˆë‹¤.

Acceptance Criteria:
âœ“ í…Œì´ë¸” ìƒíƒœ ë³€ê²½ì´ 500ms ì´ë‚´ì— Admin ëŒ€ì‹œë³´ë“œì— ë°˜ì˜
âœ“ 15ë¶„ ì´ìƒ ë¹„í™œì„± í…Œì´ë¸” ìë™ ê²½ê³ 
âœ“ ê°•ì œ Unclaim ì‹œ í•´ë‹¹ ë¡œê±°ì—ê²Œ ì•Œë¦¼ ì „ì†¡
```

---

### 4.2. ì—£ì§€ ì¼€ì´ìŠ¤ (Edge Cases)

#### Story 3: ì˜ëª»ëœ í…Œì´ë¸” Claim ì‹¤ìˆ˜
```
As a ë¡œê±°,
I want to ì˜ëª» ì„ íƒí•œ í…Œì´ë¸”ì„ ì¦‰ì‹œ í•´ì œí•˜ê³ 
So that ë‹¤ë¥¸ í…Œì´ë¸”ì„ ë‹¤ì‹œ ì„ íƒí•  ìˆ˜ ìˆë‹¤.

Workflow:
[Tbl 4 ì„ íƒ] â†’ [ì‹¤ìˆ˜ ë°œê²¬] â†’ [â† ë’¤ë¡œ ë²„íŠ¼]
  â†“
[í™•ì¸ ëŒ€í™”ìƒì] "Tbl 4ë¥¼ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
  â†“
[ì˜ˆ] â†’ current_logger_id = NULL â†’ ë‹¤ë¥¸ í…Œì´ë¸” ì„ íƒ ê°€ëŠ¥
```

#### Story 4: ë™ì‹œ Claim ì¶©ëŒ
```
Scenario: ë¡œê±° Aì™€ Bê°€ 0.1ì´ˆ ì°¨ì´ë¡œ Tbl 4ë¥¼ ë™ì‹œ ì„ íƒ

[ë¡œê±° A] 14:32:15.100 â†’ Tbl 4 Claim ìš”ì²­
[ë¡œê±° B] 14:32:15.200 â†’ Tbl 4 Claim ìš”ì²­
  â†“
[PostgreSQL] Row-Level Lock + version ì²´í¬
  â†“
[ê²°ê³¼]
  - ë¡œê±° A: âœ“ ì„±ê³µ (version 1 â†’ 2)
  - ë¡œê±° B: âœ— ì‹¤íŒ¨ (version ë¶ˆì¼ì¹˜)
  â†“
[ë¡œê±° B UI]
  âš ï¸ "ì´ í…Œì´ë¸”ì€ ë°©ê¸ˆ ë‹¤ë¥¸ ë¡œê±°ê°€ ì„ íƒí–ˆìŠµë‹ˆë‹¤."
  [ë‹¤ë¥¸ í…Œì´ë¸” ì„ íƒ]
```

#### Story 5: ì˜¤í”„ë¼ì¸ â†’ ì˜¨ë¼ì¸ ë³µê·€
```
Scenario: ë¡œê±°ê°€ ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ìƒíƒœì—ì„œ 5ê°œ í•¸ë“œ ì…ë ¥

[14:30] ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ
  â†“
[ë¡œê±° ì…ë ¥] Hand 1, 2, 3, 4, 5 â†’ IndexedDBì— ì €ì¥
  â†“
[UI] ìƒë‹¨ì— "ğŸ“¶ ì˜¤í”„ë¼ì¸ ëª¨ë“œ (5ê°œ ëŒ€ê¸° ì¤‘)" ë°°ì§€
  â†“
[14:45] ë„¤íŠ¸ì›Œí¬ ë³µê·€ ê°ì§€
  â†“
[ìë™ ë™ê¸°í™”] íì—ì„œ ìˆœì°¨ ì „ì†¡ (1ì´ˆ ê°„ê²©)
  â†“
[UI] "âœ“ 5ê°œ í•¸ë“œ ì „ì†¡ ì™„ë£Œ" â†’ ë°°ì§€ ì œê±°
```

---

## 5. ìˆ˜ë½ ê¸°ì¤€ (Acceptance Criteria)

### 5.1. ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­

| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|------|------|-----------|
| **í…Œì´ë¸” Claim ì‘ë‹µ ì‹œê°„** | â‰¤ 2ì´ˆ | ë²„íŠ¼ íƒ­ â†’ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ |
| **ì‹¤ì‹œê°„ ë™ê¸°í™” ì§€ì—°** | â‰¤ 500ms | í…Œì´ë¸” ìƒíƒœ ë³€ê²½ â†’ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ ë°˜ì˜ |
| **íƒ€ì„ìŠ¤íƒ¬í”„ ì •í™•ë„** | ì„œë²„ ì‹œê°„ Â±100ms | `created_at` vs. ì„œë²„ NTP ì‹œê°„ |
| **ë™ì‹œ ì‚¬ìš©ì ë¶€í•˜** | 50ëª… | k6/Locust ë¶€í•˜ í…ŒìŠ¤íŠ¸ |
| **ë°°í„°ë¦¬ ì†Œëª¨** | 8ì‹œê°„ ì‚¬ìš© ì‹œ â‰¤ 30% | iOS/Android ë°°í„°ë¦¬ í”„ë¡œíŒŒì¼ë§ |

### 5.2. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### í•„ìˆ˜ (P0)
- âœ… ì‹¤ì‹œê°„ í…Œì´ë¸” ìƒíƒœ ë™ê¸°í™” (Realtime)
- âœ… ì˜¤í”„ë¼ì¸ ëª¨ë“œ + ìë™ ë™ê¸°í™”
- âœ… ìŠ¤ë§ˆíŠ¸ ì¹© ìë™ ê³„ì‚°
- âœ… ë¹ ë¥¸ ì…ë ¥ ëª¨ë“œ (Quick Log)
- âœ… Admin ê°•ì œ Unclaim + ë¡œê·¸ ì‚­ì œ
- âœ… ë‹¤í¬ ëª¨ë“œ + í–…í‹± í”¼ë“œë°±

#### ê¶Œì¥ (P1)
- â­• ë¸”ë¡ì²´ì¸ íƒ€ì„ìŠ¤íƒ¬í”„ ì¦ëª… (ì†ë„ ì˜í–¥ ìµœì†Œí™” í•„ìˆ˜)
- â­• PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
- â­• Admin ëŒ€ì‹œë³´ë“œ ì˜ìƒ ì—…ë¡œë“œ ì§€ì›

#### ì œì™¸ (Out of Scope)
- âŒ ë¡œê±° ê°„ ì±„íŒ…/ë©”ëª¨ ê¸°ëŠ¥
- âŒ AI ìë™ ë¡œê¹… (OCR)
- âŒ ì˜ìƒ í¸ì§‘ ì‹œìŠ¤í…œ API ì—°ë™

---

## 6. ë°ì´í„° & í†µí•© (Data & Integration)

### 6.1. íƒ€ì„ìŠ¤íƒ¬í”„ ì •ì±…

**í¬ë§·**: ISO 8601 (UTC)
```
2025-01-06T14:32:15.123Z
```

**í—ˆìš© ì˜¤ì°¨**: Â±60ì´ˆ (ì˜ìƒ-ë°ì´í„° ë§¤ì¹­ ì‹œ)

**ì„œë²„ ì‹œê°„ ë™ê¸°í™”**: í´ë¼ì´ì–¸íŠ¸ëŠ” ì•± ì‹œì‘ ì‹œ ì„œë²„ ì‹œê°„(`GET /api/time`)ì„ ê°€ì ¸ì™€ ë¡œì»¬ ì‹œê°„ ì˜¤í”„ì…‹ ê³„ì‚°

```javascript
// í´ë¼ì´ì–¸íŠ¸ ì‹œê°„ ë³´ì •
const serverTime = await fetch('/api/time').then(r => r.json());
const localOffset = serverTime.timestamp - Date.now();

// ë¡œê·¸ ì „ì†¡ ì‹œ
const correctedTimestamp = new Date(Date.now() + localOffset).toISOString();
```

---

### 6.2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (Supabase PostgreSQL)

#### 6.2.1. `profiles` (Auth ì—°ë™)
```sql
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  username TEXT NOT NULL,
  role TEXT CHECK (role IN ('logger', 'admin')) DEFAULT 'logger',
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### 6.2.2. `tables` (í…Œì´ë¸” ìƒíƒœ - Realtime ë™ê¸°í™” ëŒ€ìƒ)
```sql
CREATE TABLE tables (
  table_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  table_name TEXT NOT NULL, -- "Feature Table 4"
  current_logger_id UUID REFERENCES profiles(id),
  last_activity_at TIMESTAMPTZ DEFAULT NOW(),
  version INT DEFAULT 1, -- Optimistic Lockingìš©
  UNIQUE(table_name)
);

-- RLS ì •ì±…: ë¡œê±°ëŠ” READë§Œ, Claimì€ ì¡°ê±´ë¶€ UPDATE
ALTER TABLE tables ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Anyone can read tables" ON tables
  FOR SELECT USING (true);

CREATE POLICY "Claim only if available or owned" ON tables
  FOR UPDATE USING (
    current_logger_id IS NULL OR
    current_logger_id = auth.uid()
  );
```

#### 6.2.3. `rosters` (í”Œë ˆì´ì–´ ëª…ë¶€)
```sql
CREATE TABLE rosters (
  player_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  is_kp BOOLEAN DEFAULT false,
  current_table_id UUID REFERENCES tables(table_id),
  current_seat INT CHECK (current_seat BETWEEN 1 AND 10),
  UNIQUE(name)
);
```

#### 6.2.4. `hands` (í•¸ë“œ ë¡œê·¸ - VTCíŒ€ êµ¬ë… ëŒ€ìƒ)
```sql
CREATE TABLE hands (
  hand_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMPTZ DEFAULT NOW(), -- ì˜ìƒ ë§¤ì¹­ Key
  logger_id UUID REFERENCES profiles(id),
  table_id UUID REFERENCES tables(table_id),
  btn_seat INT,
  kp_id UUID REFERENCES rosters(player_id),
  logging_street TEXT CHECK (logging_street IN ('Preflop', 'Flop', 'Turn', 'River', 'Unknown')),
  final_pot_size BIGINT,
  board_cards JSONB, -- {"f1":"KD", "f2":"QS", ...}
  quick_log BOOLEAN DEFAULT false,
  result TEXT, -- "KP Win" / "Opponent Win" (Quick Logìš©)
  hash_proof TEXT, -- ë¸”ë¡ì²´ì¸ ì¦ëª… (ì„ íƒ)
  synced BOOLEAN DEFAULT false -- ì˜¤í”„ë¼ì¸ ë™ê¸°í™” í”Œë˜ê·¸
);

-- RLS: ë¡œê±°ëŠ” INSERTë§Œ ê°€ëŠ¥
CREATE POLICY "Loggers can insert hands" ON hands
  FOR INSERT WITH CHECK (logger_id = auth.uid());

-- Adminì€ ì‚­ì œ ê°€ëŠ¥
CREATE POLICY "Admins can delete hands" ON hands
  FOR DELETE USING (
    EXISTS (SELECT 1 FROM profiles WHERE id = auth.uid() AND role = 'admin')
  );
```

#### 6.2.5. `hand_players_ledger` (ì¹© ì›ì¥)
```sql
CREATE TABLE hand_players_ledger (
  ledger_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  hand_id UUID REFERENCES hands(hand_id) ON DELETE CASCADE,
  player_id UUID REFERENCES rosters(player_id),
  stack_before BIGINT NOT NULL,
  stack_after BIGINT NOT NULL,
  showdown_cards JSONB -- {"c1":"AS", "c2":"KH"}
);
```

---

### 6.3. ë¸”ë¡ì²´ì¸ íƒ€ì„ìŠ¤íƒ¬í”„ ì¦ëª… (ì„ íƒ ê¸°ëŠ¥)

**ëª©ì **: ë°ì´í„° ìœ„ë³€ì¡° ë°©ì§€ (í† ë„ˆë¨¼íŠ¸ ê³µì •ì„± ë³´ì¥)

**ì•Œê³ ë¦¬ì¦˜**: SHA-256 í•´ì‹œì²´ì¸

```javascript
// í•¸ë“œ ë¡œê·¸ ì „ì†¡ ì‹œ
const handData = { /* ... */ };
const previousHash = await getLastHandHash(); // ì´ì „ í•¸ë“œì˜ hash_proof
const currentHash = sha256(JSON.stringify(handData) + previousHash);

await insertHand({
  ...handData,
  hash_proof: currentHash
});
```

**ê²€ì¦**:
```javascript
// VTCíŒ€ ì‹œìŠ¤í…œì—ì„œ ê²€ì¦
const hands = await getAllHandsOrderByCreatedAt();
let expectedHash = "0"; // Genesis

for (const hand of hands) {
  const calculatedHash = sha256(hand.data + expectedHash);
  if (calculatedHash !== hand.hash_proof) {
    throw new Error(`Hand ${hand.hand_id} tampered!`);
  }
  expectedHash = hand.hash_proof;
}
```

**ì„±ëŠ¥ ì˜í–¥ í‰ê°€**:
- SHA-256 í•´ì‹±: ~1ms
- ì†ë„ ì˜í–¥ ë¬´ì‹œ ê°€ëŠ¥ â†’ **ì±„íƒ**

---

## 7. UI/UX ì„¤ê³„ (Design Specifications)

### 7.1. ë””ë°”ì´ìŠ¤ íƒ€ê²Ÿ
- **Primary**: ìŠ¤ë§ˆíŠ¸í° (iOS 15+, Android 10+)
- **í™”ë©´ í¬ê¸°**: 4.7" ~ 6.7" (iPhone SE ~ iPhone Pro Max)
- **ë°©í–¥**: ì„¸ë¡œ ëª¨ë“œ ê³ ì •

### 7.2. ë””ìì¸ ì›ì¹™

#### ì›í•¸ë“œ UX (One-Handed Operation)
- ëª¨ë“  ì£¼ìš” ë²„íŠ¼ì„ í™”ë©´ í•˜ë‹¨ 1/3 ì˜ì—­ì— ë°°ì¹˜
- ì—„ì§€ ë„ë‹¬ ê°€ëŠ¥ ë²”ìœ„ (Thumb Zone) ìµœì í™”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† ìƒë‹¨ 1/3: ì •ë³´ í‘œì‹œ
â”‚  Table Status   â”‚
â”‚  (ì½ê¸° ì „ìš©)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† ì¤‘ë‹¨ 1/3: ìŠ¤í¬ë¡¤ ì»¨í…ì¸ 
â”‚                 â”‚
â”‚  Player List    â”‚
â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† í•˜ë‹¨ 1/3: ì£¼ìš” ë²„íŠ¼
â”‚  [Claim] [Send] â”‚ â† ì—„ì§€ ë„ë‹¬ ê°€ëŠ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë‹¤í¬ ëª¨ë“œ (í•„ìˆ˜)
- **ì»¬ëŸ¬ íŒ”ë ˆíŠ¸**:
  - ë°°ê²½: `#121212` (Material Dark)
  - í…ìŠ¤íŠ¸: `#E0E0E0`
  - ê°•ì¡°: `#BB86FC` (ë³´ë¼)
  - ê²½ê³ : `#CF6679` (ë¹¨ê°•)
  - ì„±ê³µ: `#03DAC6` (ì²­ë¡)

#### í–…í‹± í”¼ë“œë°±
| ì•¡ì…˜ | íŒ¨í„´ |
|------|------|
| í…Œì´ë¸” Claim ì„±ê³µ | ì§„ë™ 1íšŒ (50ms) |
| í•¸ë“œ ì „ì†¡ ì„±ê³µ | ì§„ë™ 2íšŒ (50ms, 100ms ê°„ê²©) |
| ì˜¤ë¥˜ ë°œìƒ | ì§„ë™ 3íšŒ (30ms, 50ms ê°„ê²©) |

---

### 7.3. í™”ë©´ êµ¬ì„± (Screen Layouts)

#### Screen 1: ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ (KP ì„ íƒ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¶ Online  |  ğŸ‘¤ Logger A       â”‚ â† ìƒë‹¨ ë°”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš¡ Available Tables             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ Tbl 4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ‘¤ Daniel K. (Seat 7)      â”‚ â”‚
â”‚ â”‚ [âœ“ Available] [Claim â†’]   â”‚ â”‚ â† ë…¹ìƒ‰ ë°°ê²½
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ â¸ï¸ Occupied Tables              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€ Tbl 7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ‘¤ John P. (Seat 3)        â”‚ â”‚
â”‚ â”‚ [Logged by: B] [1ë¶„ ì „]   â”‚ â”‚ â† íšŒìƒ‰ ë°°ê²½
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ [âš™ï¸ Settings]                  â”‚ â† í•˜ë‹¨ ë²„íŠ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Screen 2: í…Œì´ë¸” ë·° (BTN ì„ íƒ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back  |  Tbl 4 - Daniel K.   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        í…Œì´ë¸” ë‹¤ì´ì–´ê·¸ë¨         â”‚
â”‚                                 â”‚
â”‚       [5: John]  [6: Mike]     â”‚
â”‚                                 â”‚
â”‚  [4: BTN] ğŸ‘‘    [7: Daniel K.]â”‚ â† ë²„íŠ¼ ë§ˆì»¤
â”‚                                 â”‚
â”‚       [3: Lisa]  [8: Tom]      â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BTN: Seat 4 âœ“                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âš¡ Quick Log]  [ğŸ“ Full Log]  â”‚ â† í•˜ë‹¨ ì„ íƒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Screen 3A: Quick Log (ê°„ì†Œí™” ëª¨ë“œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back  |  Quick Log            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Opponent:                       â”‚
â”‚ [Seat 5 - John â–¼]              â”‚
â”‚                                 â”‚
â”‚ Result:                         â”‚
â”‚ â—‰ KP ìŠ¹ë¦¬   â—‹ Opponent ìŠ¹ë¦¬   â”‚
â”‚                                 â”‚
â”‚ Pot Size:                       â”‚
â”‚ [125,000] BBs                  â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ’¾ Save & Send to VTC]        â”‚ â† í•˜ë‹¨ ë²„íŠ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Screen 3B: Full Log (ìƒì„¸ ëª¨ë“œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back  |  Full Hand Log        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Street: [River â–¼]              â”‚
â”‚                                 â”‚
â”‚ Board: [Kâ™¦] [Qâ™ ] [Jâ™¥] [+ Add] â”‚
â”‚                                 â”‚
â”‚ Players:                        â”‚
â”‚ â”Œâ”€ Daniel K. (KP) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Cards: [Aâ™ ] [Aâ™¥]           â”‚ â”‚
â”‚ â”‚ Stack Before: 1,250,000    â”‚ â”‚ â† ìë™ ì…ë ¥
â”‚ â”‚ Stack After:  [1,500,000]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€ John (Seat 5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Cards: [Kâ™¥] [Kâ™£]           â”‚ â”‚
â”‚ â”‚ Stack Before: [800,000]    â”‚ â”‚
â”‚ â”‚ Stack After:  [550,000]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ Pot: [250,000] BBs             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ’¾ Save & Send to VTC]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Screen 4: Admin Dashboard (VTC í”„ë¡œë“€ì„œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ Admin Console               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ì‹¤ì‹œê°„ í˜„í™©                  â”‚
â”‚ â”Œâ”€ Active Loggers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â— A â†’ Tbl 4 (2ë¶„ ì „)      â”‚ â”‚
â”‚ â”‚ â— B â†’ Tbl 7 (ë°©ê¸ˆ ì „)     â”‚ â”‚
â”‚ â”‚ â—‹ C â†’ (ëŒ€ê¸° ì¤‘)           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ âš ï¸ ê²½ê³                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Tbl 2: 15ë¶„ ë¹„í™œì„±         â”‚ â”‚
â”‚ â”‚ [ğŸ”“ ê°•ì œ í•´ì œ]             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ ğŸ—‘ï¸ ìµœê·¼ ë¡œê·¸                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ #1234: AA vs KK (14:32)   â”‚ â”‚
â”‚ â”‚ [ğŸ—‘ï¸ ì‚­ì œ] [ğŸ“¹ ì˜ìƒ ë³´ê¸°]   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ [ğŸ“¤ ì˜ìƒ ì—…ë¡œë“œ]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 7.4. ë°°í„°ë¦¬ ìµœì í™”

#### ì „ëµ
1. **WebSocket ëŒ€ì‹  Long Polling** (ë°°í„°ë¦¬ ì¹œí™”ì )
   ```javascript
   // Supabase Realtime ì„¤ì •
   const channel = supabase.channel('table_changes', {
     config: { broadcast: { self: false } },
     params: { eventsPerSecond: 1 } // 1ì´ˆì— 1íšŒë¡œ ì œí•œ
   });
   ```

2. **í™”ë©´ êº¼ì§ ë°©ì§€ (ë¡œê¹… ì¤‘ë§Œ)**
   ```javascript
   // Screen Wake Lock API
   let wakeLock = null;

   async function keepScreenOn() {
     wakeLock = await navigator.wakeLock.request('screen');
   }

   function releaseWakeLock() {
     wakeLock?.release();
   }
   ```

3. **ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ì§€ì—°**
   - ì•±ì´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì´ë™ ì‹œ ë™ê¸°í™” íë¥¼ 5ë¶„ë§ˆë‹¤ í™•ì¸ (ëŒ€ì‹  1ì´ˆë§ˆë‹¤)

---

## 8. ê¸°ìˆ  ìŠ¤íƒ (Technology Stack)

### 8.1. Frontend

| ë ˆì´ì–´ | ê¸°ìˆ  | ì´ìœ  |
|--------|------|------|
| **Framework** | React 18 + Vite | ë¹ ë¥¸ HMR, PWA ìµœì í™” |
| **UI Library** | Tailwind CSS + DaisyUI | ë‹¤í¬ëª¨ë“œ ë‚´ì¥, ë°˜ì‘í˜• |
| **ìƒíƒœ ê´€ë¦¬** | Zustand | ê²½ëŸ‰, Realtime ë™ê¸°í™” ìš©ì´ |
| **ë¡œì»¬ DB** | Dexie.js (IndexedDB) | ì˜¤í”„ë¼ì¸ í, ìë™ ë™ê¸°í™” |
| **PWA** | Vite PWA Plugin | Service Worker ìë™ ìƒì„± |

### 8.2. Backend

| ì„œë¹„ìŠ¤ | ì—­í•  |
|--------|------|
| **Supabase Auth** | ë¡œê±°/Admin ì¸ì¦ |
| **Supabase PostgreSQL** | í•µì‹¬ ë°ì´í„° ì €ì¥ |
| **Supabase Realtime** | í…Œì´ë¸” ìƒíƒœ ë™ê¸°í™” |
| **Supabase Storage** | (ì„ íƒ) ì˜ìƒ íŒŒì¼ ì €ì¥ |

### 8.3. ë°°í¬

- **í˜¸ìŠ¤íŒ…**: Vercel / Netlify (ë¬´ë£Œ í‹°ì–´)
- **ë„ë©”ì¸**: `vtc-logger.vercel.app`
- **CI/CD**: GitHub Actions
  - PR ìƒì„± ì‹œ ìë™ í…ŒìŠ¤íŠ¸
  - `main` ë¸Œëœì¹˜ í‘¸ì‹œ ì‹œ ìë™ ë°°í¬

---

## 9. ë³´ì•ˆ & ê·œì • ì¤€ìˆ˜ (Security & Compliance)

### 9.1. ì¸ì¦ & ê¶Œí•œ

#### Supabase RLS ì •ì±… ìš”ì•½
```sql
-- 1. ë¡œê±°: rosters READ, hands INSERT, tables ì¡°ê±´ë¶€ UPDATE
-- 2. Admin: ëª¨ë“  í…Œì´ë¸” READ/WRITE
-- 3. VTCíŒ€: hands READ (Realtime êµ¬ë…)
```

### 9.2. ë°ì´í„° ë³´ì¡´ ì •ì±…
- **í•¸ë“œ ë¡œê·¸**: ì˜êµ¬ ë³´ê´€ (ì‚­ì œ ê¶Œí•œ: Adminë§Œ)
- **í…Œì´ë¸” ìƒíƒœ**: í† ë„ˆë¨¼íŠ¸ ì¢…ë£Œ í›„ ìë™ ì´ˆê¸°í™” (ìŠ¤ì¼€ì¤„ëŸ¬)

### 9.3. ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸
- âœ… HTTPS ê°•ì œ
- âœ… RLS í™œì„±í™” (ëª¨ë“  í…Œì´ë¸”)
- âœ… API Key í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬
- âœ… Rate Limiting (Supabase ë‚´ì¥)
- âœ… ì…ë ¥ ê²€ì¦ (Zod ìŠ¤í‚¤ë§ˆ)

---

## 10. í…ŒìŠ¤íŠ¸ ê³„íš (Testing Plan)

### 10.1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)
- **ë„êµ¬**: Vitest
- **ì»¤ë²„ë¦¬ì§€ ëª©í‘œ**: 80% ì´ìƒ
- **ì£¼ìš” í…ŒìŠ¤íŠ¸**:
  - ì¹© ìë™ ê³„ì‚° ë¡œì§
  - íƒ€ì„ìŠ¤íƒ¬í”„ ì˜¤í”„ì…‹ ë³´ì •
  - í•´ì‹œì²´ì¸ ê²€ì¦

### 10.2. í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)
- **ë„êµ¬**: Playwright
- **ì‹œë‚˜ë¦¬ì˜¤**:
  - ë¡œê±° A, B ë™ì‹œ Claim ì¶©ëŒ
  - ì˜¤í”„ë¼ì¸ â†’ ì˜¨ë¼ì¸ ë³µê·€ ë™ê¸°í™”
  - Admin ê°•ì œ Unclaim

### 10.3. ë¶€í•˜ í…ŒìŠ¤íŠ¸ (Load Testing)
- **ë„êµ¬**: k6
- **ì‹œë‚˜ë¦¬ì˜¤**:
  ```javascript
  // 50ëª… ë™ì‹œ ì ‘ì†, ê°ì 10ê°œ í•¸ë“œ ë¡œê¹…
  export let options = {
    vus: 50,
    duration: '5m',
  };
  ```

---

## 11. ë§ˆì¼ìŠ¤í†¤ & ì¼ì • (Milestones)

### Phase 1: MVP (4ì£¼)
- âœ… Supabase ìŠ¤í‚¤ë§ˆ ì„¤ê³„ & RLS ì •ì±…
- âœ… ì‹¤ì‹œê°„ í…Œì´ë¸” ìƒíƒœ ë™ê¸°í™”
- âœ… Quick Log ëª¨ë“œ
- âœ… PWA ê¸°ë³¸ ì„¤ì •

### Phase 2: ê³ ê¸‰ ê¸°ëŠ¥ (3ì£¼)
- âœ… ì˜¤í”„ë¼ì¸ ëª¨ë“œ + IndexedDB
- âœ… ìŠ¤ë§ˆíŠ¸ ì¹© ìë™ ê³„ì‚°
- âœ… Admin ëŒ€ì‹œë³´ë“œ
- âœ… ë‹¤í¬ ëª¨ë“œ + í–…í‹±

### Phase 3: ìµœì í™” & í…ŒìŠ¤íŠ¸ (2ì£¼)
- âœ… ë°°í„°ë¦¬ ìµœì í™”
- âœ… ë¶€í•˜ í…ŒìŠ¤íŠ¸ (50ëª…)
- âœ… ë¸”ë¡ì²´ì¸ ì¦ëª… (ì„ íƒ)
- âœ… ì‚¬ìš©ì ë§¤ë‰´ì–¼

---

## 12. ì„±ê³µ ì§€í‘œ (Success Metrics)

### 12.1. ì •ëŸ‰ ì§€í‘œ
| ì§€í‘œ | í˜„ì¬ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|------|------|------|-----------|
| **í•¸ë“œë‹¹ ì‘ì—…ì‹œê°„** | 12ë¶„ | 3ë¶„ | VTCíŒ€ í”¼ë“œë°± |
| **ë°ì´í„° ì†ì‹¤ë¥ ** | N/A | 0% | ì˜¤í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ |
| **ì¶©ëŒ ë°œìƒë¥ ** | N/A | <0.1% | ë™ì‹œ Claim í…ŒìŠ¤íŠ¸ |
| **íƒ€ì„ìŠ¤íƒ¬í”„ ì˜¤ì°¨** | N/A | Â±60ì´ˆ | ì˜ìƒ ë§¤ì¹­ ê²€ì¦ |

### 12.2. ì •ì„± ì§€í‘œ
- âœ… ë¡œê±°: "5ë¶„ ì•ˆì— ì‚¬ìš©ë²• ìŠµë“"
- âœ… VTCíŒ€: "ìˆ˜ë™ ë§¤ì¹­ ì‘ì—… 90% ê°ì†Œ"
- âœ… Admin: "ì‹¤ì‹œê°„ ê´€ì œë¡œ ë¬¸ì œ ì˜ˆë°©"

---

## 13. ë¶€ë¡ (Appendix)

### 13.1. ìš©ì–´ì§‘ (Glossary)
- **KP (Key Player)**: VTC ì½˜í…ì¸ ì˜ ì£¼ìš” í”Œë ˆì´ì–´
- **Claim**: ë¡œê±°ê°€ íŠ¹ì • í…Œì´ë¸”ì„ "ë‹´ë‹¹" ìƒíƒœë¡œ ì§€ì •
- **Quick Log**: ì¹´ë“œ ìƒëµ, ê²°ê³¼ë§Œ ì…ë ¥í•˜ëŠ” ê°„ì†Œí™” ëª¨ë“œ
- **Chip Ledger**: ì¹© ë³€ë™ì„ Before/Afterë¡œ ê¸°ë¡í•˜ëŠ” ë°©ì‹

### 13.2. ì°¸ê³  ìë£Œ
- [Supabase Realtime ë¬¸ì„œ](https://supabase.com/docs/guides/realtime)
- [PWA ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](https://web.dev/pwa-checklist/)
- [IndexedDB ê°€ì´ë“œ](https://web.dev/indexeddb/)

---

**ë¬¸ì„œ ìŠ¹ì¸**:
- [ ] VTC í”„ë¡œë“€ì„œ
- [ ] ê°œë°œíŒ€ ë¦¬ë”
- [ ] QA íŒ€

**ë‹¤ìŒ ë‹¨ê³„**: PRD ìŠ¹ì¸ í›„ â†’ ê¸°ìˆ  ì„¤ê³„ ë¬¸ì„œ(TDD) ì‘ì„± â†’ ê°œë°œ ì‹œì‘

---

*PRD v3.0 - 2025-01-06 ì‘ì„±*
*ë¬¸ì˜: [your-email@example.com]*