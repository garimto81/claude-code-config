# PRD-0004: 전역 지침 워크플로우 최적화

**작성일**: 2025-01-13
**버전**: 1.0.0
**타입**: Documentation Optimization
**우선순위**: High

---

## 📋 요약

전역 지침 문서들(루트 .md 파일 7개, 1,737줄)의 토큰 효율성을 높이면서 최신 기능(Agent Optimizer, Auto PR/Merge)을 완전히 반영하는 최적화 작업.

**핵심 목표**:
- ✅ 토큰 최적화: 중복 제거, 간결한 표현
- ✅ 완전성 확보: 모든 최신 기능 문서화
- ✅ 일관성 유지: 용어, 구조, 스타일 통일

---

## 🎯 목적

### 1. 토큰 최적화
**현재 문제**:
- 7개 루트 .md 파일 총 1,737줄
- 문서 간 중복 내용 존재 (예: Phase 설명, Agent 사용법)
- 장황한 표현, 불필요한 예시 반복

**목표**:
- **30% 토큰 감소** (1,737줄 → ~1,200줄)
- 중복 제거, 핵심만 유지
- 상세 내용은 docs/ 폴더로 이동

### 2. 완전성 확보
**현재 누락**:
- Agent Optimizer 시스템 (PRD-0003, 최신 추가)
- Auto PR/Merge 워크플로우 세부사항
- Context7, Playwright 필수 사용 가이드 미흡

**목표**:
- 모든 최신 기능 반영
- 실제 사용 패턴 반영 (Agent Top 5 등)
- 누락된 명령어, 설정 추가

### 3. 일관성 유지
**현재 문제**:
- 문서마다 다른 섹션 구조
- 용어 불일치 (예: "Subagent" vs "Agent")
- 업데이트 날짜 불일치

**목표**:
- 통일된 문서 구조
- 용어 통일
- 버전 동기화

---

## 📂 범위

### 대상 파일 (7개)
1. **CLAUDE.md** (262줄) - 핵심 워크플로우
2. **README.md** (347줄) - 전체 개요
3. **깃허브_워크플로우_개요.md** (530줄)
4. **깃허브_빠른시작.md** (369줄)
5. **README_GITHUB_WORKFLOW.md** (50줄)
6. **CLAUDE_CLI_AUTO_BYPASS_SETUP.md** (88줄)
7. **README_CLAUDE_CLI.md** (91줄)

### 제외
- docs/ 폴더 (별도 정리 필요 시 추가 PRD)
- scripts/ (코드 주석만, 문서 아님)
- tasks/ (PRD 및 Task 파일)

---

## 🔍 현재 상태 분석

### 1. CLAUDE.md (v4.7.0, 262줄)
**강점**:
- ✅ Phase 0-6 워크플로우 명확
- ✅ Agent Top 5 업데이트됨
- ✅ Agent Optimizer 섹션 추가됨

**약점**:
- ❌ 일부 섹션 장황함 (예: Agent 설명)
- ❌ 예시가 중복됨
- ❌ docs/ 링크만 있고 핵심 내용 없음

**개선 방향**:
- Quick reference 형식으로 축약
- 상세 내용은 링크로 대체
- 예시를 최소화

### 2. README.md (v4.3.0, 347줄)
**강점**:
- ✅ 전체 구조 개요 제공
- ✅ Agent Optimizer 섹션 추가됨 (v4.3.0)

**약점**:
- ❌ CLAUDE.md와 중복 많음
- ❌ 폴더 구조 설명이 너무 상세
- ❌ 빠른 시작 가이드가 여러 개 중복

**개선 방향**:
- CLAUDE.md는 핵심 워크플로우, README.md는 네비게이션으로 역할 분리
- 폴더 구조 간소화
- Quick Start를 단일 섹션으로 통합

### 3. 깃허브 워크플로우 문서들 (949줄)
- **깃허브_워크플로우_개요.md** (530줄)
- **깃허브_빠른시작.md** (369줄)
- **README_GITHUB_WORKFLOW.md** (50줄)

**문제**:
- ❌ 3개 파일에 중복 내용 과다
- ❌ _워크플로우_개요.md가 너무 길음 (530줄)
- ❌ 역할 구분이 불명확

**개선 방향**:
- 개요 → 핵심만 (5분 읽기)
- 빠른시작 → 설치 명령어 중심
- README_GITHUB → 네비게이션으로 축약

### 4. Claude CLI 문서들 (179줄)
- **CLAUDE_CLI_AUTO_BYPASS_SETUP.md** (88줄)
- **README_CLAUDE_CLI.md** (91줄)

**문제**:
- ❌ 내용이 중복됨
- ❌ 전역 워크플로우와 관련 낮음

**개선 방향**:
- 단일 파일로 통합하거나 docs/로 이동
- 또는 간단한 Quick Start만 남기고 나머지 제거

---

## ✅ 최적화 전략

### Strategy 1: 역할 명확화

| 파일 | 역할 | 목표 길이 | 비고 |
|------|------|-----------|------|
| CLAUDE.md | 핵심 워크플로우 (Phase 0-6) | 200줄 (-62줄) | 간결한 레퍼런스 |
| README.md | 네비게이션 & 개요 | 250줄 (-97줄) | 문서 안내 중심 |
| 깃허브_워크플로우_개요.md | 5분 개요 | 300줄 (-230줄) | ROI, Before/After만 |
| 깃허브_빠른시작.md | 30분 설치 가이드 | 250줄 (-119줄) | 명령어 중심 |
| README_GITHUB_WORKFLOW.md | 색인 | 30줄 (-20줄) | 링크만 |
| Claude CLI 통합 | Quick Start | 80줄 (-99줄) | 단일 파일로 |
| **합계** | | **1,110줄** | **-627줄 (36% 감소)** |

### Strategy 2: 중복 제거

**중복 패턴**:
1. Phase 0-6 설명 (CLAUDE.md, README.md)
2. Agent 사용법 (CLAUDE.md, README.md)
3. GitHub 워크플로우 개념 (3개 파일)
4. 설치 명령어 (여러 파일)

**해결**:
- 각 내용을 단 하나의 파일에만 작성
- 다른 파일에서는 링크로 참조
- 예: "Phase 0-6 워크플로우는 [CLAUDE.md](CLAUDE.md) 참조"

### Strategy 3: 계층적 구조

```
CLAUDE.md (핵심)
  ├─ Phase 0-6 워크플로우
  ├─ Agent Top 5
  └─ Quick Commands

README.md (네비게이션)
  ├─ 문서 색인
  ├─ Quick Start
  └─ 폴더 구조

깃허브_워크플로우_개요.md (개요)
  └─ 5분 요약, ROI

깃허브_빠른시작.md (실습)
  └─ 30분 설치 가이드

docs/ (상세)
  ├─ AGENTS_REFERENCE.md
  ├─ AGENT_OPTIMIZER_GUIDE.md
  └─ 기타 상세 가이드
```

---

## 🎯 구체적 개선 사항

### 1. CLAUDE.md (262줄 → 200줄)

**제거할 내용** (-80줄):
- ❌ Agent 상세 설명 → "docs/AGENTS_REFERENCE.md 참조"로 대체
- ❌ Skill 활용 예시 → 간단한 한 줄로 축약
- ❌ 변경 이력 상세 → 최신 버전만 명시
- ❌ 긴 예시 코드 → 핵심 명령어만

**추가할 내용** (+18줄):
- ✅ Agent Optimizer 사용 예시 (실제 커밋 예시)
- ✅ Context7 + Playwright 조합 패턴
- ✅ 병렬 Agent 실행 예시 (구체적인 코드)

**최종**: 262 - 80 + 18 = **200줄**

### 2. README.md (347줄 → 250줄)

**제거할 내용** (-120줄):
- ❌ CLAUDE.md와 중복되는 Phase 설명
- ❌ 상세한 폴더 트리 (간소화)
- ❌ 중복된 Quick Start 예시
- ❌ 긴 설명 텍스트

**추가할 내용** (+23줄):
- ✅ 최신 기능 색인 (Agent Optimizer, Auto PR/Merge)
- ✅ 문서 업데이트 이력 테이블
- ✅ 빠른 검색 키워드

**최종**: 347 - 120 + 23 = **250줄**

### 3. 깃허브_워크플로우_개요.md (530줄 → 300줄)

**제거할 내용** (-260줄):
- ❌ 장황한 설명 → 핵심만 bullet points
- ❌ 중복 예시
- ❌ 너무 상세한 비교표

**유지할 내용**:
- ✅ ROI 계산
- ✅ Before/After 비교
- ✅ 핵심 가치 제안

**최종**: 530 - 260 + 30 = **300줄**

### 4. 깃허브_빠른시작.md (369줄 → 250줄)

**제거할 내용** (-139줄):
- ❌ 장황한 설명 → 명령어 중심으로
- ❌ 중복된 개념 설명 (개요 문서 참조)

**유지할 내용**:
- ✅ 설치 명령어
- ✅ 단계별 체크리스트

**최종**: 369 - 139 + 20 = **250줄**

### 5. Claude CLI 통합 (179줄 → 80줄)

**통합 전략**:
- 2개 파일을 1개로 통합: `CLAUDE_CLI_QUICKSTART.md`
- 또는 docs/로 이동

**최종**: **80줄**

### 6. README_GITHUB_WORKFLOW.md (50줄 → 30줄)

**간소화**:
- 링크 색인만 유지
- 설명 제거

**최종**: **30줄**

---

## 📊 예상 성과

### 토큰 감소
- **Before**: 1,737줄 (추정 ~30,000 토큰)
- **After**: 1,110줄 (추정 ~19,000 토큰)
- **감소**: **627줄 (36% 감소, ~11,000 토큰 절감)**

### 완전성 향상
- ✅ Agent Optimizer 완전 통합
- ✅ Auto PR/Merge 워크플로우 명확화
- ✅ Context7 + Playwright 필수 사용 패턴 추가
- ✅ 누락된 명령어 및 설정 추가

### 사용자 경험
- ✅ 빠른 검색 및 참조
- ✅ 명확한 역할 구분
- ✅ 중복 없는 단일 정보원

---

## 🚀 구현 계획

### Phase 0.5: Task List
- Task 0.0: Feature Branch 생성
- Task 1.0: 현재 상태 분석 (중복, 누락 항목 확인)
- Task 2.0: CLAUDE.md 최적화
- Task 3.0: README.md 최적화
- Task 4.0: 깃허브 워크플로우 문서 최적화
- Task 5.0: Claude CLI 문서 통합/이동
- Task 6.0: 문서 간 일관성 검증
- Task 7.0: 버전 업데이트 (v4.8.0)
- Task 8.0: 커밋 및 PR

---

## 🔒 제약사항

1. **기존 링크 유지**: 외부에서 참조하는 링크는 깨지지 않도록
2. **역호환성**: 기존 워크플로우 사용자에게 영향 없도록
3. **점진적 적용**: 한 번에 모든 파일 변경하지 않고 단계적으로

---

## ✅ 성공 기준

1. **토큰 30% 감소**: 1,737줄 → 1,200줄 이하
2. **완전성 100%**: 모든 최신 기능(Agent Optimizer, Auto PR/Merge) 반영
3. **중복 제로**: 동일 내용이 2개 이상 파일에 존재하지 않음
4. **테스트 통과**:
   - 모든 내부 링크 정상 작동
   - 예시 명령어 실행 가능
   - 문서 구조 검증 스크립트 통과

---

## 📚 참고

- PRD-0001: Claude.md 최적화 (v4.5.0)
- PRD-0002: Auto PR/Merge 시스템
- PRD-0003: Agent/Skill Optimizer
- [Token Optimization Best Practices](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/optimize-tokens)

---

**작성자**: Claude Code
**검토자**: User
**승인**: Pending
